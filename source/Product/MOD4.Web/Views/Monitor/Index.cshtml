
@{
    Layout = null;
}

<style>
    /*
        @@keyframes blink-smooth {
            to {
                color: transparent;
            }
        }

        @@keyframes blink {
            50% {
                color: transparent;
            }
        }

        area[name='assyVCS'] {
            font-size: 48px;
            animation: 2s blink 3 steps(1);
            border: 1rem solid;
        }
    */
</style>

<body style="background: #3d3d3d;">
    <div>
        <div style="clear: both; width: 500px; height: 50px; border: 1px solid black;" id="selections"></div>

        <img id="fabLayout2" src="~/img/FabLayout2F.png" usemap="#veg">
        <map id="veg_map" name="veg">
            <area alt="bondVCS" shape="poly" name="bondVCS" coords="209,129,  866,129, 866,174, 209,174" href="#">
            <area alt="FOG" shape="poly" name="FOG" coords="97,278, 486,278, 486,310, 97,310" href="#">
            <area alt="ff2STH" shape="poly" name="ff2STH" coords="510,289, 694,289, 694,316, 510,316" href="#">
            <area alt="HTHSTH20" shape="poly" name="HTHSTH20" coords="97,332, 175,332, 175,324, 495,324, 495,332, 575,332, 575,356, 97,356" href="#">
            <area alt="ocaVCS" shape="poly" name="ocaVCS" coords="545,214 ,1011,214, 1011,259, 545,259" href="#">
            <area alt="ff2HTH55" shape="poly" name="ff2HTH55" coords="148,390, 436,390, 436,383, 650,383, 650,427, 376,427, 376,444, 148,444" href="#">
            <area alt="ff2STH55" shape="poly" name="ff2STH55" coords="675,393, 700,393, 700,400, 769,400, 769,396, 845,396, 845,431, 832,431, 832,439, 763,439, 763,431, 675,431" href="#">
            <area alt="assyVCS" shape="poly" name="assyVCS" coords="886,137 ,993,137, 993,121, 1023,121, 1023,156 , 1210,156, 1210,146, 1275,146, 1275,165, 1320,165, 1321,176, 886,176" href="#">
            <area alt="assyPaDi" shape="poly" name="assyPaDi" coords="870,385, 1158,385, 1158,396, 870,396" href="#">
            <area alt="assyPana" shape="poly" name="assyPana" coords="870,432, 1092,432, 1092,412, 1126,412, 1126,432, 1148,432, 1148,422, 1167,422, 1167,432, 1207,432, 1207,445, 870,445" href="#">
            @*<area alt="celery" shape="poly" name="celery" coords="147,131, 156,143, 163,146, 177,129, 175,138, 177,138, 182,144, 180,164, 148,169, 139,171, 144,180, 141,198, 139,208, 140,222, 127,237, 148,216, 163,212, 166,216, 160,223, 163,233, 153,281, 135,318, 129,313, 122,322, 117,320, 99,301, 98,293, 85,300, 80,303, 74,300,
                    64,285, 76,272, 98,249,
                    94,246, 72,261, 57,258, 62,251, 60,248, 47,228, 51,207, 71,195, 72,192, 38,202, 33,195, 30,173, 147,127" href="#">
                <area alt="carrots" shape="poly" name="carrots" coords="175,74, 170,80, 154,85, 189,103, 190,111, 182,111, 179,98, 157,95, 142,111, 140,128, 38,169, 39,163, 74,143, 74,141, 56,135, 52,115, 79,111, 78,106, 63,98, 71,91, 81,88, 82,83, 91,75, 136,74, 174,70" href="#">
                <area alt="asparagus" shape="poly" name="asparagus" coords="224,25, 239,33, 244,36, 247,32, 327,23, 344,31, 343,36, 319,41, 315,42, 302,52, 272,61, 265,64, 270,73, 256,67, 248,60, 187,55, 192,58, 192,60, 184,64, 185,67, 176,67, 173,69, 142,67, 146,63, 135,59, 123,57, 142,44, 145,42, 143,39, 145,32, 207,38, 185,18, 212,19,
                    220,22" href="#">
                <area alt="squash" shape="poly" name="squash" coords="388,26, 391,38, 394,43, 395,46, 425,58, 427,68, 428,92, 386,125, 371,132, 374,124, 377,118, 374,105, 371,105, 370,107, 364,102, 368,97, 356,87, 353,89, 348,86, 322,87, 314,100, 314,102, 282,85, 278,84, 273,74, 272,68, 319,46, 346,31" href="#">
                <area alt="yellowpepper" shape="poly" name="yellowpepper" coords="237,222, 246,254, 255,291, 262,323, 271,322, 285,350, 306,352, 307,365, 298,374, 285,366, 270,375, 249,378, 244,384, 231,389, 215,373, 210,363, 203,357, 199,368, 184,361, 175,349, 162,356, 140,340, 143,305, 161,252, 168,224, 188,240, 194,223, 198,232, 213,226, 224,224,
                    229,218" href="#">
                <area alt="broccoli" shape="poly" name="broccoli" coords="341,89, 342,91, 360,95, 353,100, 360,104, 364,109, 368,115, 369,112, 367,110, 376,111, 373,123, 367,128, 362,128, 359,131, 348,134, 345,137, 340,138, 341,148, 334,167, 323,172, 315,165, 315,162, 312,165, 311,172, 293,167, 292,141, 298,136, 307,134, 322,129, 328,128,
                    329,116, 319,109, 314,104,
                    317,93, 332,84" href="#">
                <area alt="broccoli" shape="poly" name="broccoli" coords="328,178, 338,197, 337,202, 330,215, 328,217, 325,228, 307,234, 305,239, 287,225, 287,216, 286,212, 282,216, 277,212, 277,185, 284,179, 310,175" href="#">
                <area alt="dip" shape="poly" name="dip" coords="253,102, 277,100, 280,105, 290,107, 295,111, 304,130, 290,140, 287,147, 240,157, 238,159, 227,153, 203,146, 198,125, 200,116, 214,102, 231,102" href="#">*@
        </map>
    </div>
</body>


<script src="~/lib/jquery/dist/jquery.min.js"></script>
<script src="~/plugins/popper/popper_v3.min.js"></script>
<script src="~/lib/bootstrap/dist/js/bootstrap.js"></script>
<script src="~/plugins/jquery-ui/jquery-ui.min.js"></script>
<script src="~/js/jquery.imagemapster.js"></script>
<script>
    // a cross reference of area names to text to be shown for each area
    var xref = {
        carrots: "<b>Carrots</b> are delicious and may turn your skin orange!",
        asparagus: "<b>Asparagus</b> is one of the first vegetables of the spring. "
            + "Being a dark green, it's great for you, and has interesting side effects.",
        squash: "<b>Squash</b> is a winter vegetable, and not eaten raw too much. Is that really squash?",
        redpepper: "<b>Red peppers</b> are actually the same as green peppers, they've just been left on "
            + "the vine longer. Delicious when fire-roasted.",
        yellowpepper: "Similar to red peppers, <b>yellow peppers</b> are sometimes sweeter.",
        celery: "<b>Celery</b> is a fascinating vegetable. Being mostly water, it actually takes your body "
            + "more calories to process it than it provides.",
        cucumbers: "<b>Cucumbers</b> are cool.",
        broccoli: "<b>Broccoli</b> is like a forest of goodness in your mouth. And very good for you. "
            + "Eat lots of broccoli!",
        dip: "Everything here is good for you but this one. <b>Don't be a dip!</b>"
    };

    var defaultDipTooltip = '';

    var image = $('#fabLayout2');

    var _options = {
        fillOpacity: 0.6,
        fillColor: "2fc44f",
        stroke: true,
        strokeColor: "2fc44f",
        strokeOpacity: 0.8,
        strokeWidth: 3,
        singleSelect: false,
        mapKey: 'name',
        listKey: 'name',
        isSelectable: false,
        onClick: function (e) {
            var newToolTip = defaultDipTooltip;

            // update text depending on area selected
            //$('#selections').html(xref[e.key]);

            // if Asparagus selected, change the tooltip
            if (e.key === 'asparagus') {
                newToolTip = "OK. I know I have come down on the dip before, but let's be real. "
                    + "Raw asparagus without any of that delicious ranch and onion dressing "
                    + "slathered all over it is not so good.";
            }
            image.mapster('set_options', {
                areas: [{
                    key: "dip",
                    toolTip: newToolTip
                }]
            });
        },
        showToolTip: true,
        toolTipClose: ["tooltip-click", "area-click"],
        areas: [
            {
                key: "bondVCS",
                fillColor: "d42e16",
                stroke: true,
                strokeColor: "d42e16",
                strokeOpacity: 0.8,
                strokeWidth: 3,
            },
            {
                key: "FOG",
                fillColor: "d42e16",
                stroke: true,
                strokeColor: "d42e16",
                strokeOpacity: 0.8,
                strokeWidth: 3,
                selected: true
            },
            {
                key: "ff2STH",
                fillColor: "d42e16",
                stroke: true,
                strokeColor: "d42e16",
                strokeOpacity: 0.8,
                strokeWidth: 3,
                selected: true
            },
            {
                key: "HTHSTH20",
                fillColor: "d42e16",
                stroke: true,
                strokeColor: "d42e16",
                strokeOpacity: 0.8,
                strokeWidth: 3,
                selected: true
            },
            {
                key: "ocaVCS",
                fillColor: "d42e16",
                stroke: true,
                strokeColor: "d42e16",
                strokeOpacity: 0.8,
                strokeWidth: 3,
                selected: true
            },
            {
                key: "ff2HTH55",
                fillColor: "d42e16",
                stroke: true,
                strokeColor: "d42e16",
                strokeOpacity: 0.8,
                strokeWidth: 3,
                selected: true
            },
            {
                key: "ff2STH55",
                fillColor: "d42e16",
                stroke: true,
                strokeColor: "d42e16",
                strokeOpacity: 0.8,
                strokeWidth: 3,
                selected: true
            },
            {

                key: "assyVCS",
                fillColor: "d42e16",
                stroke: true,
                strokeColor: "d42e16",
                strokeOpacity: 0.8,
                strokeWidth: 3,
                selected: true
            },
            {
                key: "assyPaDi",
                fillColor: "d42e16",
                stroke: true,
                strokeColor: "d42e16",
                strokeOpacity: 0.8,
                strokeWidth: 3,
                selected: true
            },
            {
                key: "assyPana",
                fillColor: "d42e16",
                stroke: true,
                strokeColor: "d42e16",
                strokeOpacity: 0.8,
                strokeWidth: 3,
                selected: true
            },
        ]
    };

    image.mapster(_options);

    $("#btnTest").on('click', function (e) {
        //$("area[name='assyVCS']").mapster('select');
        //$("area[name='ocaVCS']").mapster('select');
        image.mapster('highlight', false);
        _options.areas.push({
            key: "assyVCS",
            fillColor: "d42e16",
            strokeColor: "d42e16",
            toolTip: '123321',
            isDeselectable: false
        });

        image.mapster('set_options', _options);
        image.mapster('set', true, 'assyVCS');
        //image.mapster('set', true, 'ocaVCS');

        //$("area[name='assyVCS']").mapster('set', true, {
        //    isSelectable: false
        //});
        //$("area[name='ocaVCS']").mapster('set', true, {
        //    selected: true
        //});

        //$("area[name='assyVCS']").animate({ opacity: 0.5 }, 2000, function () {
        //    // 動畫結束後的處理程式碼（可選）
        //    // 這裡的示範是將透明度恢復為 1
        //    $(this).animate({ opacity: 1 }, 500);
        //});
        //image.mapster('highlight', "assyVCS");
        //image.mapster('highlight', "ocaVCS");
    });

    var server = 'ws://localhost:48291'; //如果开启了https则这里是wss
    var vWebSocket = null;
    window.onload = function () {
        //建立一個web socket 連線
        vWebSocket = new WebSocket(server + '/CarUX/send');
        
        //如果連線成功
        vWebSocket.onopen = function (e) {
            console.log('connection start ...');
        }

        //接收到訊息時
        vWebSocket.onmessage = function (e) {
            console.log('Recevied Message:' + e.data);
            if (e.data) {
                var msgArray = e.data.split('\t');
                alert(msgArray[msgArray.length - 1]);
            }
        }
    }
</script>